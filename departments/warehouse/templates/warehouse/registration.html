{% extends 'base/base_template.html' %}
{% load static %}

{% block Title %}
    لیست ورود و خروج انبار
{% endblock %}

{% block Link %}
    <link rel="stylesheet" href="{% static 'frontend/styles/warehouse-registration-list.css' %}">
{% endblock %}


{% block Content %}
    <!-- sabt dar anbar -->
    <div class="content-modal modal-warehouse-register">
        <div class="inner-modal">
            <form action="{% url 'dp_warehouse:registration' %}" method="post" class="px-4 pt-2 task">
                {% csrf_token %}
                <div class="py-2">
                    <div class="title">
                        <h4>ثبت در انبار</h4>
                    </div>
                    <div class="information-section">
                        <div class="information-item">
                            <label for="lihh">دریافت کننده</label>
                            <input type="text" placeholder="تسک شماره یک" name="receiver" required>
                        </div>
                        <div class="d-flex ">
                            <div class="col-6" style="padding:0px 5px ;">
                                <div class="information-item">
                                    <label for="lihh">تاریخ ورود</label>
                                    <input type="date" placeholder="1401/2/8" name="time_enter" required>
                                </div>
                            </div>
                            <div class="col-6" style="padding:0px 5px ;">
                                <div class="information-item">
                                    <label for="lihh">تاریخ خروج</label>
                                    <input type="date" placeholder="1402/2/5" name="time_leave" required>
                                </div>
                            </div>

                        </div>
                        <div class="d-flex">
                            <div class="col-12" style="padding:0px 5px ;">
                                <div class="information-item">
                                    <label for="lihh">اسم</label>
                                    <input type="text" placeholder="نام" name="name" required>
                                </div>
                            </div>
                        </div>
                        <div class="information-item">
                            <label for="lihh">توضیحات</label>
                            <textarea name="description" required id="" cols="30" rows="10"
                                      style="height: 163px;"></textarea>
                        </div>
                        <div class="d-flex ">
                            <div class="col-6" style="padding:0px 5px ;">
                                <div class="information-item">
                                    <label for="lihh">کد</label>
                                    <input type="text" placeholder="1234" name="code" required>
                                </div>
                            </div>
                            <div class="col-6" style="padding:0px 5px ;">
                                <div class="information-item">
                                    <label for="lihh">ابعاد</label>
                                    <input type="text" placeholder="44" name="size" required>
                                </div>
                            </div>

                        </div>
                        <div class="d-flex ">
                            <div class="col-6" style="padding:0px 5px ;">
                                <div class="information-item">
                                    <label for="lihh">موجودی</label>
                                    <input type="number" placeholder="1401/2/8" name="amount" required>
                                </div>
                            </div>
                            <div class="col-6" style="padding:0px 5px ;">
                                <div class="information-item">
                                    <label for="lihh">موجودی قابل برداشت</label>
                                    <input type="number" placeholder="1402/2/5" name="amount_withdrawable" required>
                                </div>
                            </div>

                        </div>
                        <div class="col-12" style="padding:0px 5px ;">
                            <div class="information-item">
                                <label for="lihh">موجودی تخصیص داده شده</label>
                                <input type="number" placeholder="1401/2/8" name="amount_allocated" required>
                            </div>
                        </div>

                        <button class="sabt-modal btn-primary col-12">ثبت</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="col-12 col-md-5 col-lg-6 mx-auto mb-4 p-4">
        <div>
            <div class="filters-radio">
                <div class="title">
                    مرتب بر اساس :
                </div>
                <div class="container">
                    <div>
                        <a class="{% if request.GET.sort_by == 'latest' or not request.GET.sort_by %}active{% endif %}"
                           href="{% url 'departments.warehouse:registration' %}?sort_by=latest">
                            جدید ترین
                        </a>
                    </div>
                    <div>
                        <a class="{% if request.GET.sort_by == 'oldest' %}active{% endif %}"
                           href="{% url 'departments.warehouse:registration' %}?sort_by=oldest">
                            قدیمی ترین
                        </a>
                    </div>
                </div>
            </div>
            <div>
                <form action="{% url 'departments.warehouse:registration' %}" method="get" class="overflow-hidden">
                    <input type="hidden" name="sort_by" value="{{ request.GET.sort_by }}">
                    <p class="title">جست و جو :</p>
                    <div class="cnt-search col-11 col-md-7">
                        <input type="text" name="search" value="{{ request.GET.search }}"
                               placeholder="نام ، کد و ..">
                        <div>
                            <button>
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- sabt dar anbar -->

    <!-- edit item anbar -->
    {% for item in items %}
        <div class="content-modal modal-warehouse-item-edit">
            <div class="inner-modal">
                <form action="{% url 'dp_warehouse:register_detail' item_id=item.id %}" method="post"
                      class="px-4 pt-2 task">
                    {% csrf_token %}
                    <div class="py-2">
                        <div class="title">
                            <h4>ویرایش</h4>
                        </div>
                        <div class="information-section">
                            <div class="information-item">
                                <label for="lihh">دریافت کننده</label>
                                <input type="text" placeholder="تسک شماره یک" name="receiver"
                                       value="{{ item.receiver }}" required>
                            </div>
                            <div class="d-flex ">
                                <div class="col-6" style="padding:0px 5px ;">
                                    <div class="information-item">
                                        <label for="lihh">تاریخ ورود</label>
                                        <input type="date" placeholder="1401/2/8" name="time_enter"
                                               value="{{ item.get_time_enter }}" required>
                                    </div>
                                </div>
                                <div class="col-6" style="padding:0px 5px ;">
                                    <div class="information-item">
                                        <label for="lihh">تاریخ خروج</label>
                                        <input type="date" placeholder="1402/2/5" name="time_leave"
                                               value="{{ item.get_time_leave }}" required>
                                    </div>
                                </div>

                            </div>
                            <div class="d-flex">
                                <div class="col-12" style="padding:0px 5px ;">
                                    <div class="information-item">
                                        <label for="lihh">اسم</label>
                                        <input type="text" placeholder="نام" name="name" value="{{ item.name }}"
                                               required>
                                    </div>
                                </div>
                            </div>
                            <div class="information-item">
                                <label for="lihh">توضیحات</label>
                                <textarea name="description" required id="" cols="30" rows="10"
                                          style="height: 163px;">{{ item.description }}</textarea>
                            </div>
                            <div class="d-flex ">
                                <div class="col-6" style="padding:0px 5px ;">
                                    <div class="information-item">
                                        <label for="lihh">کد</label>
                                        <input type="text" placeholder="1234" name="code" value="{{ item.code }}"
                                               required>
                                    </div>
                                </div>
                                <div class="col-6" style="padding:0px 5px ;">
                                    <div class="information-item">
                                        <label for="lihh">ابعاد</label>
                                        <input type="text" placeholder="44" name="size" value="{{ item.size }}"
                                               required>
                                    </div>
                                </div>

                            </div>
                            <div class="d-flex ">
                                <div class="col-6" style="padding:0px 5px ;">
                                    <div class="information-item">
                                        <label for="lihh">موجودی</label>
                                        <input type="number" placeholder="1401/2/8" name="amount"
                                               value="{{ item.amount }}" required>
                                    </div>
                                </div>
                                <div class="col-6" style="padding:0px 5px ;">
                                    <div class="information-item">
                                        <label for="lihh">موجودی قابل برداشت</label>
                                        <input type="number" placeholder="1402/2/5" name="amount_withdrawable"
                                               value="{{ item.amount_withdrawable }}" required>
                                    </div>
                                </div>

                            </div>
                            <div class="col-12" style="padding:0px 5px ;">
                                <div class="information-item">
                                    <label for="lihh">موجودی تخصیص داده شده</label>
                                    <input type="number" placeholder="1401/2/8" name="amount_allocated"
                                           value="{{ item.amount_allocated }}" required>
                                </div>
                            </div>

                            <button class="sabt-modal btn-primary col-12">ویرایش</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    {% endfor %}
    <!-- edit item anbar -->
    <!-- popup deliver -->
    <div class="content-modal-two modal-deliver">
        <div class="inner-modal">
            <form class="p-4">
                <div class="information-section">
                    <div class="information-item">
                        <label for="lihh">نام:</label>
                        <input type="text">
                    </div>
                    <div class="information-item">
                        <label for="lihh">مقدار</label>
                        <input type="text">
                    </div>
                </div>
                <div class="information-section">
                    <div class="sabt-modal">ثبت</div>
                </div>
            </form>
        </div>
    </div>
    <!-- popup deliver -->

    <div class="container-fluid col-12" style="padding:10px ;">
        <!-- START MAIN -->
        <main class="main-admin">
            <div class="title p-4">
                <span style="padding-left:3px;">لیست ورود و خروج انبار</span>
            </div>
            <!-- btn -->
            <div class="deliver">
                <span class="btn-sabt-anbar" style="cursor:pointer;">ثبت در انبار</span>
                <span class="btn-deliver">تحویل دادن</span>
            </div>
            <!-- btn -->
            <!-- start table warehouse -->
            <div class="content-warehouse container-fluid">
                <div class="col-12 content-warehouse-inner">
                    <table style="width:100%">
                        <!-- title table -->
                        <tbody>
                        <tr>
                            <!--each title-row -->
                            <th>تاریخ ورود</th>
                            <!--each title-row -->
                            <th>تاریخ خروج</th>
                            <th>دریافت کننده</th>
                            <th>اسم</th>
                            <th>توضیحات</th>
                            <th>کد</th>
                            <th>ابعاد</th>
                            <th>موجودی</th>
                            <th>موجودی قابل برداشت</th>
                            <th>موجودی تخصیص داده شده</th>
                            <th>کیفیت</th>
                            <th>ویرایش</th>
                        </tr>
                        <!-- title table -->
                        <!-- row content table -->
                        {% for item in items %}
                            <tr class="row-table">
                                <!-- each column content table -->
                                <td class="item-row datetime-convert">{{ item.get_time_enter }}</td>
                                <td><span class="item-row datetime-convert">{{ item.get_time_leave }}</span></td>
                                <td><span class="item-row">{{ item.receiver }}</span></td>
                                <td><span class="item-row">{{ item.name }}</span></td>
                                <td><span class="item-row">کلیک کنید</span></td>
                                <td><span class="item-row">{{ item.code }}</span></td>
                                <td class="item-row">{{ item.size }}</td>
                                <td class="item-row">{{ item.amount }}</td>
                                <td class="item-row">{{ item.amount_withdrawable }}</td>
                                <td class="item-row">{{ item.amount_allocated }}</td>
                                <td class="item-row">{% if item.has_quality_passed %}تایید شده{% else %}تایید
                                    نشده{% endif %}</td>
                                <td><span class="item-row btn-warehouse-item-edit"
                                          style="cursor:pointer ;">ویرایش</span>
                                </td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="200">
                                    <div class="container-not-found-base">
                                        <p>چیزی یافت نشد</p>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- end table warehouse -->
        </main>
        <!-- START MAIN -->
    </div>
{% endblock %}


{% block Script %}
    <script type="module" src="{% static 'frontend/js/warehouse-registration-list.js' %}"></script>
{% endblock %}
