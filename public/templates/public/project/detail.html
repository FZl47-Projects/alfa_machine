{% extends 'base/base_template.html' %}
{% load static %}

{% block Title %}
    {{ project.name }}
{% endblock %}

{% block Link %}
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <link rel="stylesheet" href="{% static 'frontend/styles/project.css' %}"/>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

    <style>

        .group-form {
            margin: 10px 2px;
        }

        .group-form label {
            direction: ltr;
            margin-bottom: 10px;
        }
    </style>
{% endblock %}

{% block Content %}


    <main class="main content-page container">
        <h5 class="title-page">{{ project.name }}</h5>
        <section class="col-12 project-content">
            <div class="inner-project">
                <!-- btn tab page -->
                <div class="btn-content d-flex justify-content-between" style="border-bottom:1px solid #a2a2a2 ;">
                    <div class="btns col-12 col-md-7">
                        <div class="btn-change col-2 text-center active">مشخصات پروژه</div>
                        <div class="btn-change col-2 text-center">مواد اولیه</div>
                        <div class="btn-change col-2 text-center">اسنادآپلود شده</div>
                        <div class="btn-change col-2 text-center d-none">بازرگانی</div>
                        <div class="btn-change col-2 text-center">مکاتبات پروژه</div>
                        <div class="btn-change col-2 text-center">امور مالی</div>
                    </div>
                    <div>
                        <button class="btn btn-outline-primary text-center mx-1 p-2 px-4" data-bs-toggle="modal"
                                data-bs-target="#project-edit">ویرایش
                        </button>
                        <a href="{% url 'public:project_delete' project_id=project.id %}"
                           class="btn btn-outline-danger text-center p-2 px-4">حذف</a>
                    </div>
                </div>
                <!-- btn tab page -->

                <section class="content-notifcation">
                    <!-- Project-specifications chart and name ddline  -->
                    <div class="Project-specifications">
                        <div class="col-12 col-md-8 d-flex flex-column justify-content-center align-items-start">
                            <div class="right">
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>شماره درخواست:</span>
                                        <span>{{ project.number_id }}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>نام پروژه:</span>
                                        <span>{{ project.name }}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>کارفرما:</span>
                                        <span>{{ project.task_master }}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>تاریخ شروع:</span>
                                        <span class="datetime-convert">{{ project.time_start }}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>تاریخ پایان</span>
                                        <span class="datetime-convert">{{ project.time_end }}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>قیمت</span>
                                        <span class="price-el">{{ project.price }}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span> وضعیت پرداخت :</span>
                                        <span>{% if project.is_paid %}پرداخت شده است{% else %}پرداخت نشده
                                            است{% endif %}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>تاریخ پیش پرداخت</span>
                                        <span class="datetime-convert">{{ project.get_prepayment_datetime }}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>تعداد کل :</span>
                                        <span class="price-el">{{ project.count_total }}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>تعداد باقی مانده :</span>
                                        <span class="price-el">{{ project.count_remaining }}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>ایتم :</span>
                                        <span>{{ project.item|default:'چیزی ثبت نشده است' }}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>تاریخ تحویل نمونه :</span>
                                        <span class="datetime-convert">{{ project.get_sample_delivery_date }}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>تاریخ تحویل انبوه :</span>
                                        <span class="datetime-convert">{{ project.get_mass_delivery_date }}</span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6 p-2">
                                    <div class="right-item">
                                        <span>درصد پیشرفت</span>
                                        <div class="mt-3 text-primary">{{ project.get_progress_percentage }}%</div>
                                    </div>
                                </div>
                                <div class="col-12 p-2">
                                    <div class="right-item">
                                        <span>توضیحات</span>
                                        <div class="mt-3">{{ project.description|default:'توضیحی ثبت نشده است' }}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- chart left -->
                        <div id="cnt-chart" class="col-12 col-md-4 chart-section">
                            <canvas id="chart"></canvas>
                        </div>
                        <!-- chart left -->
                    </div>
                    <!-- Project-specifications chart and name ddline  -->
                    <!--start content list task -->
                    <div class="content-items p-2 active">
                        <section class="section-table">
                            <h6 class="title-page">لیست تسک ها</h6>
                            <div class="table">
                                <div class="table-title">
                                    <div class="col-1">
                                        <div class="table-title-item">
                                            ردیف
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            نام تسک
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            وضعیت
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            واحد
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            الویت
                                        </div>
                                    </div>
                                    <div class="col-1">
                                        <div class="table-title-item">
                                            تاریخ شروع
                                        </div>
                                    </div>
                                    <div class="col-1">
                                        <div class="table-title-item">
                                            تاریخ پایان
                                        </div>
                                    </div>
                                    {#                                    <div class="col-1">#}
                                    {#                                        <div class="table-title-item">#}
                                    {##}
                                    {#                                        </div>#}
                                    {#                                    </div>#}
                                </div>
                                <div class="table-content">
                                    {% for task in project.get_tasks %}
                                        <div class="row-table">
                                            <div class="col-1 p-2">
                                                <div class="table-content-item">
                                                    {{ forloop.counter }}
                                                </div>
                                            </div>
                                            <div class="col-2 p-2">
                                                <div class="table-content-item">
                                                    {{ task.name }}
                                                </div>
                                            </div>
                                            <div class="col-2 p-2">
                                                <div class="status">
                                                    {{ task.get_state_label }}
                                                </div>
                                            </div>
                                            <div class="col-2 p-2">
                                                <div class="table-content-item">
                                                    {{ task.to_department }}
                                                </div>
                                            </div>
                                            <div class="col-2 p-2">
                                                <div class="table-content-item">
                                                    {{ task.priority }}
                                                </div>
                                            </div>
                                            <div class="col-1 p-2">
                                                <div class="table-content-item datetime-convert">
                                                    {{ task.get_time_start }}
                                                </div>
                                            </div>
                                            <div class="col-1 p-2">
                                                <div class="table-content-item datetime-convert">
                                                    {{ task.get_time_end }}
                                                </div>
                                            </div>
                                            {#                                                                                        <div class="col-1 p-2">#}
                                            {#                                                                                            <div class="table-content-item">#}
                                            {#                                                                                                <div class="btn-table blue">انجام شد</div>#}
                                            {#                                                                                            </div>#}
                                            {#                                                                                        </div>#}
                                        </div>
                                    {% empty %}
                                        <div class="container-not-found-base">
                                            <p>چیزی یافت نشد</p>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </section>
                    </div>
                    <!--end content list task -->
                    <!--start List of raw materials -->
                    <div class="content-items p-2">
                        <section class="section-table">
                            <h6 class="title-page">مواد اولیه</h6>
                            <div class="table">
                                <div class="table-title">
                                    <div class="col-1">
                                        <div class="table-title-item">
                                            ردیف
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="table-title-item">
                                            نام مواد
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="table-title-item">
                                            تحویل گیرنده
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="table-title-item">
                                            کد
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            تاریخ
                                        </div>
                                    </div>
                                </div>
                                <div class="table-content">
                                    {% for material_item in project.get_material_items %}
                                        <div class="row-table">
                                            <div class="col-1 p-2">
                                                <div class="table-content-item">
                                                    {{ forloop.counter }}
                                                </div>
                                            </div>
                                            <div class="col-3 p-2">
                                                <div class="table-content-item">
                                                    {{ material_item.name }}
                                                </div>
                                            </div>
                                            <div class="col-3 p-2">
                                                <div class="table-content-item">
                                                    {{ material_item.receiver }}
                                                </div>
                                            </div>
                                            <div class="col-3 p-2">
                                                <div class="table-content-item">
                                                    {{ material_item.code }}
                                                </div>
                                            </div>
                                            <div class="col-2 p-2">
                                                <div class="table-content-item datetime-convert">
                                                    {{ material_item.time_enter }}
                                                </div>
                                            </div>
                                        </div>
                                    {% empty %}
                                        <div class="container-not-found-base">
                                            <p>چیزی یافت نشد</p>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </section>
                    </div>
                    <!--end List of raw materials -->
                    <!--start Uploaded documents -->
                    <div class="content-items p-2">
                        <section class="section-table">
                            <div class="table">
                                <div class="table-title">
                                    <div class="col-1">
                                        <div class="table-title-item">
                                            ردیف
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            نام
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="table-title-item">
                                            توضیحات
                                        </div>
                                    </div>

                                    <div class="col-2">
                                        <div class="table-title-item">
                                            تاریخ
                                        </div>
                                    </div>
                                    <div class="col-1">
                                        <div class="table-title-item">
                                            فایل
                                        </div>
                                    </div>
                                </div>
                                <div class="table-content">
                                    {% for file in project.get_files %}
                                        <div class="row-table">
                                            <div class="col-1 p-2">
                                                <div class="table-content-item">
                                                    {{ forloop.counter }}
                                                </div>
                                            </div>
                                            <div class="col-2 p-2">
                                                <div class="table-content-item">
                                                    {{ file.name }}
                                                </div>
                                            </div>
                                            <div class="col-6 p-2">
                                                <div class="table-content-item">
                                                    <span class="description">
                                                        {{ file.description }}
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="col-2 p-2">
                                                <div class="table-content-item datetime-convert">
                                                    {{ file.get_created_at }}
                                                </div>
                                            </div>
                                            <div class="col-1 p-2">
                                                <div class="table-content-item">
                                                    {% if file.get_file_url %}
                                                        <a href="{{ file.get_file_url }}" download class="btn-table">دانلود</a>
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    {% empty %}
                                        <div class="container-not-found-base">
                                            <p>چیزی یافت نشد</p>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </section>
                    </div>
                    <!--end Uploaded documents -->
                    <!-- start Commerce -->
                    <div class="content-items p-2">
                        <section class="section-table">
                            <div class="table">
                                <div class="table-title">
                                    <div class="col-1">
                                        <div class="table-title-item">
                                            ردیف
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            فرستنده
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="table-title-item">
                                            توضیحات
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            تاریخ
                                        </div>
                                    </div>
                                    <div class="col-1">
                                        <div class="table-title-item">

                                        </div>
                                    </div>
                                </div>
                                <div class="table-content">
                                    <div class="row-table">
                                        <div class="col-1 p-2">
                                            <div class="table-content-item">
                                                1
                                            </div>
                                        </div>
                                        <div class="col-2 p-2">
                                            <div class="table-content-item">
                                                نام و نام خانوادگی
                                            </div>
                                        </div>
                                        <div class="col-6 p-2">
                                            <div class="table-content-item">
                                                <span class="description"> لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ</span>
                                            </div>
                                        </div>
                                        <div class="col-2 p-2">
                                            <div class="table-content-item">
                                                1388/8/5
                                            </div>
                                        </div>
                                        <div class="col-1 p-2">
                                            <div class="table-content-item">
                                                <div class="btn-table">دانلود</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row-table">
                                        <div class="col-1 p-2">
                                            <div class="table-content-item">
                                                1
                                            </div>
                                        </div>
                                        <div class="col-2 p-2">
                                            <div class="table-content-item">
                                                نام و نام خانوادگی
                                            </div>
                                        </div>
                                        <div class="col-6 p-2">
                                            <div class="table-content-item">
                                                <span class="description"> لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ</span>
                                            </div>
                                        </div>
                                        <div class="col-2 p-2">
                                            <div class="table-content-item">
                                                1388/8/5
                                            </div>
                                        </div>
                                        <div class="col-1 p-2">
                                            <div class="table-content-item">
                                                <div class="btn-table">دانلود</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row-table">
                                        <div class="col-1 p-2">
                                            <div class="table-content-item">
                                                1
                                            </div>
                                        </div>
                                        <div class="col-2 p-2">
                                            <div class="table-content-item">
                                                نام و نام خانوادگی
                                            </div>
                                        </div>
                                        <div class="col-6 p-2">
                                            <div class="table-content-item">
                                                <span class="description"> لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ</span>
                                            </div>
                                        </div>
                                        <div class="col-2 p-2">
                                            <div class="table-content-item">
                                                1388/8/5
                                            </div>
                                        </div>
                                        <div class="col-1 p-2">
                                            <div class="table-content-item">
                                                <div class="btn-table">دانلود</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row-table">
                                        <div class="col-1 p-2">
                                            <div class="table-content-item">
                                                1
                                            </div>
                                        </div>
                                        <div class="col-2 p-2">
                                            <div class="table-content-item">
                                                نام و نام خانوادگی
                                            </div>
                                        </div>
                                        <div class="col-6 p-2">
                                            <div class="table-content-item">
                                                <span class="description"> لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ</span>
                                            </div>
                                        </div>
                                        <div class="col-2 p-2">
                                            <div class="table-content-item">
                                                1388/8/5
                                            </div>
                                        </div>
                                        <div class="col-1 p-2">
                                            <div class="table-content-item">
                                                <div class="btn-table">دانلود</div>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </section>
                    </div>
                    <!--end Commerce -->
                    <!-- ticket -->
                    <div class="content-items p-2">
                        <section class="section-table">
                            <div class="table">
                                <div class="table-title">
                                    <div class="col-1">
                                        <div class="table-title-item">
                                            ردیف
                                        </div>
                                    </div>
                                    <div class="col-1">
                                        <div class="table-title-item">
                                            واحد فرستنده
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="table-title-item">
                                            متن تیکت
                                        </div>
                                    </div>

                                    <div class="col-2">
                                        <div class="table-title-item">
                                            تاریخ
                                        </div>
                                    </div>
                                    <div class="col-1">
                                        <div class="table-title-item">
                                            فایل
                                        </div>
                                    </div>
                                </div>
                                <div class="table-content">
                                    {% for ticket in project.get_tickets %}
                                        <div class="row-table">
                                            <div class="col-1 p-2">
                                                <div class="table-content-item">
                                                    {{ forloop.counter }}
                                                </div>
                                            </div>
                                            <div class="col-1 p-2">
                                                <div class="table-content-item">
                                                    {{ ticket.from_department.name }}
                                                </div>
                                            </div>
                                            <div class="col-6 p-2">
                                                <div class="table-content-item">
                                                    <span class="description">
                                                        {{ ticket.description }}
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-2 p-2">
                                                <div class="table-content-item datetime-convert">
                                                    {{ ticket.get_created_at }}
                                                </div>
                                            </div>
                                            <div class="col-1 p-2">
                                                <div class="table-content-item">
                                                    {% if ticket.get_file_url %}
                                                        <a href="{{ ticket.get_file_url }}" download=""
                                                           class="btn-table">دانلود</a>
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    {% empty %}
                                        <div class="container-not-found-base">
                                            <p>چیزی یافت نشد</p>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </section>
                    </div>
                    <!-- ticket -->
                    <!-- financial department -->
                    <div class="content-items p-2">
                        <section class="section-table">
                            <p style="text-align: right">پرداختی ها</p>
                            <div class="table">
                                <!-- start title table -->
                                <div class="table-title">
                                    <!-- each column title table -->
                                    <div class="col-1">
                                        <div class="table-title-item">
                                            ردیف
                                        </div>
                                    </div>
                                    <!-- each column title table -->
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            نوع
                                        </div>
                                    </div>
                                    <div class="col-5">
                                        <div class="table-title-item">
                                            مبلغ
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            تاریخ
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            کدرهگیری
                                        </div>
                                    </div>

                                </div>
                                <!-- end title table -->
                                <!-- start content table -->
                                <div class="table-content">
                                    {% for payment in project.get_payments %}
                                        <div class="row-table">
                                            <!-- each column content table -->
                                            <div class="col-1 p-2">
                                                <div class="table-content-item">
                                                    {{ forloop.counter }}
                                                </div>
                                            </div>
                                            <!-- each column content table -->
                                            <div class="col-2 p-2">
                                                <div class="table-content-item">
                                                    {{ payment.get_type_payment_label }}
                                                </div>
                                            </div>
                                            <div class="col-5 p-2">
                                                <div class="table-content-item spread-price">
                                                    {{ payment.price }}
                                                </div>
                                            </div>
                                            <div class="col-2 p-2">
                                                <div class="table-content-item datetime-convert">
                                                    {{ payment.get_created_at }}
                                                </div>
                                            </div>
                                            <div class="col-2 p-2">
                                                <div class="table-content-item">
                                                    {{ payment.tracking_code }}
                                                </div>
                                            </div>

                                        </div>
                                    {% empty %}
                                        <div class="container-not-found-base">
                                            <p>چیزی یافت نشد</p>
                                        </div>
                                    {% endfor %}
                                </div>
                                <!-- start content table -->
                            </div>

                            <p style="text-align: right">پیش پرداختی ها</p>
                            <div class="table">
                                <!-- start title table -->
                                <div class="table-title">
                                    <!-- each column title table -->
                                    <div class="col-1">
                                        <div class="table-title-item">
                                            ردیف
                                        </div>
                                    </div>
                                    <!-- each column title table -->
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            نوع
                                        </div>
                                    </div>
                                    <div class="col-5">
                                        <div class="table-title-item">
                                            مبلغ
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            تاریخ
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <div class="table-title-item">
                                            کدرهگیری
                                        </div>
                                    </div>

                                </div>
                                <!-- end title table -->
                                <!-- start content table -->
                                <div class="table-content">
                                    {% for payment in project.get_prepayments %}
                                        <div class="row-table">
                                            <!-- each column content table -->
                                            <div class="col-1 p-2">
                                                <div class="table-content-item">
                                                    {{ forloop.counter }}
                                                </div>
                                            </div>
                                            <!-- each column content table -->
                                            <div class="col-2 p-2">
                                                <div class="table-content-item">
                                                    {{ payment.get_type_payment_label }}
                                                </div>
                                            </div>
                                            <div class="col-5 p-2">
                                                <div class="table-content-item spread-price">
                                                    {{ payment.price }}
                                                </div>
                                            </div>
                                            <div class="col-2 p-2">
                                                <div class="table-content-item datetime-convert">
                                                    {{ payment.get_created_at }}
                                                </div>
                                            </div>
                                            <div class="col-2 p-2">
                                                <div class="table-content-item">
                                                    {{ payment.tracking_code }}
                                                </div>
                                            </div>
                                        </div>
                                    {% empty %}
                                        <div class="container-not-found-base">
                                            <p>چیزی یافت نشد</p>
                                        </div>
                                    {% endfor %}
                                </div>
                                <!-- start content table -->
                            </div>
                        </section>
                    </div>
                    <!-- financial department -->
                </section>
            </div>
        </section>
    </main>




    <!-- Modal -->
    <div class="modal fade" id="project-edit" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <form action="{% url 'public:project_update' project_id=project.id %}" method="post">
                {% csrf_token %}
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">ویرایش پروژه</h5>
                    </div>
                    <div class="modal-body">
                        <div class="col-12">
                            <div class="group-form">
                                <label for="number_id"> :شماره درخواست</label>
                                <input type="text" id="number_id" class="form-control" name="number_id" required
                                       value="{{ project.number_id }}">
                            </div>
                            <div class="group-form">
                                <label for="name">نام</label>
                                <input type="text" id="name" class="form-control" name="name" required
                                       value="{{ project.name }}">
                            </div>
                            <div class="group-form">
                                <label for="task_master">کارفرما</label>
                                <input type="text" id="task_master" class="form-control" name="task_master" required
                                       value="{{ project.task_master }}">
                            </div>
                            <div class="group-form">
                                <label for="time_start_picker">تاریخ شروع</label>
                                <input type="text" name="" id="time_start_picker"
                                       class="form-control persianDatapicker" set-on="time_start"
                                       required readonly value="{{ project.get_time_start_input }}">
                                <input type="hidden" id="time_start" name="time_start" required
                                       value="{{ project.get_time_start_input }}">

                            </div>
                            <div class="group-form">
                                <label for="time_end_picker">تاریخ پایان</label>
                                <input type="text" name="" id="time_end_picker"
                                       class="form-control persianDatapicker" set-on="time_end"
                                       required readonly value="{{ project.get_time_end_input }}">
                                <input type="hidden" id="time_end" name="time_end" required
                                       value="{{ project.get_time_end_input }}">

                            </div>
                            <div class="group-form">
                                <label for="price">قیمت</label>
                                <input type="number" id="price" class="form-control" name="price" required
                                       value="{{ project.price }}">
                            </div>
                            <div class="group-form">
                                <label for="price">وضعیت پرداخت</label>
                                <select name="is_paid" id="" required class="form-control form-select">
                                    <option value="false" {% if not project.is_paid %}selected{% endif %}>پرداخت نشده
                                    </option>
                                    <option value="true" {% if project.is_paid %}selected{% endif %}>پرداخت شده</option>
                                </select>
                            </div>
                            <div class="group-form">
                                <label for="prepayment_datetime_picker"> :تاریخ پیش پرداخت</label>
                                <input type="text" name="" id="prepayment_datetime_picker"
                                       class="form-control persianDatapicker" set-on="prepayment_datetime"
                                       required readonly value="{{ project.get_prepayment_datetime_input }}">
                                <input type="hidden" id="prepayment_datetime" name="prepayment_datetime" required
                                       value="{{ project.get_prepayment_datetime_input }}">

                            </div>
                            <div class="group-form">
                                <label for="item">ایتم</label>
                                <textarea id="item" name="item"
                                          class="form-control">{{ project.item|default:'' }}</textarea>
                            </div>
                            <div class="group-form">
                                <label for="count_total">تعداد کل</label>
                                <input type="number" id="count_total" class="form-control" name="count_total"
                                       required value="{{ project.count_total }}">
                            </div>
                            <div class="group-form">
                                <label for="count_remaining">تعداد باقی مانده</label>
                                <input type="number" id="count_remaining" class="form-control" name="count_remaining"
                                       required value="{{ project.count_remaining }}">
                            </div>
                            <div class="group-form">
                                <label for="sample_delivery_datetime_picker"> :تاریخ تحویل نمونه</label>
                                <input type="text" name="" id="sample_delivery_datetime_picker"
                                       class="form-control persianDatapicker" set-on="sample_delivery_date"
                                       required readonly value="{{ project.get_sample_delivery_date_input }}">
                                <input type="hidden" id="sample_delivery_date" name="sample_delivery_date" required
                                       value="{{ project.get_sample_delivery_date_input }}">

                            </div>
                            <div class="group-form">
                                   <label for="mass_delivery_datetime_picker"> :تاریخ تحویل انبوه</label>
                                <input type="text" name="" id="mass_delivery_datetime_picker"
                                       class="form-control persianDatapicker" set-on="mass_delivery_date"
                                       required readonly value="{{ project.get_mass_delivery_date_input }}">
                                <input type="hidden" id="mass_delivery_date" name="mass_delivery_date" required value="{{ project.get_mass_delivery_date_input }}">

                            </div>
                            <div class="group-form">
                                <label for="description">توضیحات</label>
                                <textarea type="number" id="description" class="form-control" name="description"
                                          >{{ project.description }}</textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">لغو</button>
                        <button type="submit" class="btn btn-primary">ثبت و بروزرسانی</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

{% endblock %}

{% block Script %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        let tasks_count = '{{ project.get_tasks.count }}'
        let tasks_progress_count = '{{ project.get_tasks_progress.count }}'
        let tasks_queue_count = '{{ project.get_tasks_queue.count }}'
        let tasks_finished_count = '{{ project.get_tasks_finished.count }}'

        const chart_data = {
            labels: ['درحال انجام', 'در صف', 'انجام شده'],
            datasets: [{
                label: 'تسک ها',
                data: [tasks_progress_count, tasks_queue_count, tasks_finished_count],
                backgroundColor: [
                    'rgb(70,101,255)',
                    'rgb(204,181,7)',
                    'rgb(28,201,97)'
                ],
                hoverOffset: 4
            }]
        }
        const chart_config = {
            type: 'doughnut',
            data: chart_data,
        };

        new Chart(document.querySelector("#chart"), chart_config)
    </script>
    <script type="module" src="{% static 'frontend/js/adminpanel.js' %}"></script>
{% endblock %}







